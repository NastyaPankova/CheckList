networks:
  check_list_network:
    driver: bridge
    name: CheckListNet
services:
  api:
    build:
      context: C:\Users\═рёЄ \source\repos\CheckList\CheckListSolution
      dockerfile: Systems/Api/Dockerfile
    depends_on:
      rabbitmq:
        condition: service_started
      sqlserver:
        condition: service_started
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      CONNECTION_STRING_DATABASE: CheckListNet
      CONNECTION_STRING_HOST: sqldata
      CONNECTION_STRING_PASSWORD: Passw0rd
      CONNECTION_STRING_USER: sa
      IDENTITY_SERVER_CLIENT_ID: CheckListNet
      IDENTITY_SERVER_CLIENT_SECRET: '123456'
      IDENTITY_SERVER_URL: localhost:20002
    image: api
    networks:
      check_list_network: {}
    ports:
    - published: 20000
      target: 80
  identity:
    build:
      context: C:\Users\═рёЄ \source\repos\CheckList\CheckListSolution
      dockerfile: Systems/Identity/Dockerfile
    depends_on:
      rabbitmq:
        condition: service_started
      sqlserver:
        condition: service_started
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      CONNECTION_STRING_DATABASE: CheckListNet
      CONNECTION_STRING_HOST: sqldata
      CONNECTION_STRING_PASSWORD: Passw0rd
      CONNECTION_STRING_USER: sa
      IDENTITY_SERVER_CLIENT_ID: CheckListNet
      IDENTITY_SERVER_CLIENT_SECRET: '123456'
      IDENTITY_SERVER_URL: localhost:20002
    image: identity
    networks:
      check_list_network: {}
    ports:
    - published: 20001
      target: 80
  rabbitmq:
    image: rabbitmq:3-management
    networks:
      check_list_network: {}
    ports:
    - published: 25672
      target: 5672
    - published: 25673
      target: 5673
    - published: 35672
      target: 15672
    volumes:
    - rabbitmq_data:/var/lib/rabbitmq/:rw
  redis:
    image: redis
    networks:
      check_list_network: {}
    ports:
    - published: 26379
      target: 6379
  sqlserver:
    environment:
      ACCEPT_EULA: "Y"
      MSSQL_PID: Express
      SA_PASSWORD: Passw0rd
    image: mcr.microsoft.com/mssql/server:2019-latest
    networks:
      check_list_network: {}
    ports:
    - published: 21433
      target: 1433
    volumes:
    - sql_data:/var/opt/mssql:rw
version: '3.4'
volumes:
  rabbitmq_data: {}
  sql_data: {}